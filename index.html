
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SIQC9_BranchForge v2.1 - Quantum Strategic MindMap</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f3f6fa; }
    h1 { text-align: center; padding: 1rem; color: #002244; }
    svg { width: 100%; height: 90vh; }
    .node circle { fill: #005b99; cursor: pointer; }
    .node text { font-size: 12px; fill: #000; pointer-events: none; }
    .link { stroke: #ccc; stroke-width: 2px; }
    .popup {
      position: fixed; top: 10%; left: 50%; transform: translateX(-50%);
      background: white; padding: 1.5rem; border: 2px solid #004466;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2); border-radius: 10px; display: none; width: 450px;
    }
    .popup h3 { margin-top: 0; }
    .popup button {
      background: #004466; color: white; border: none;
      padding: 0.5rem 1rem; border-radius: 5px; margin-top: 1rem; cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>SIQC9_BranchForge v2.1 - Recursive MindMap</h1>
  <svg></svg>
  <div class="popup" id="popup">
    <h3 id="popup-title"></h3>
    <p id="popup-desc"></p>
    <button onclick="document.getElementById('popup').style.display='none'">Close</button>
  </div>
  <script>
    const nodes = [
      { id: "1", name: "Root: Arctic Sub Escalation", desc: "Russian submarine detected off Greenland", parent: "" },
      { id: "2", name: "NATO Surveillance Surge", desc: "NATO launches Arctic intel-gathering expansion", parent: "1" },
      { id: "3", name: "Greenland Doctrine Triggered", desc: "US expands Thule base infrastructure", parent: "2" },
      { id: "4", name: "AI Misread Flare", desc: "False hostile detection during solar activity", parent: "2" },
      { id: "5", name: "Chinese Arctic Post", desc: "Beijing activates polar science-military dual node", parent: "3" },
      { id: "6", name: "Brazil Grey Swan", desc: "Brazil joins Russia in Arctic sovereignty claim", parent: "3" },
      { id: "7", name: "Orbital Denial Event", desc: "Satellite block by hostile jamming, space ambiguity rises", parent: "4" },
      { id: "8", name: "EcoFront Uprising", desc: "Environmentalist coalitions sabotage Arctic routes", parent: "5" },
      { id: "9", name: "Cyber Ransom Cascade", desc: "Critical Arctic comms blacked out via unknown AI agents", parent: "6" },
      { id: "10", name: "Denmark Internal Collapse", desc: "Greenland crisis fractures Danish parliament", parent: "3" },
      { id: "11", name: "UN Polar Mediation", desc: "Emergency UN Arctic deconfliction summit", parent: "2" },
      { id: "12", name: "AI Weapon Leakage", desc: "Black AI fragments fall into rogue state hands", parent: "7" },
      { id: "13", name: "Naval Collision Course", desc: "Russian sub collides with unmapped NATO drone", parent: "1" },
      { id: "14", name: "Energy Corridor Sabotage", desc: "Green Fuel lines between Iceland/Greenland disrupted", parent: "5" },
      { id: "15", name: "QAxion Reroute Trigger", desc: "Sudden BRICS-Arctic alliance opens East ice route", parent: "6" },
    ];

    const width = window.innerWidth;
    const height = window.innerHeight;

    const svg = d3.select("svg");
    const g = svg.append("g");

    const root = d3.stratify()
      .id(d => d.id)
      .parentId(d => d.parent)(nodes);

    const tree = d3.tree().size([height - 200, width - 200]);
    const treeData = tree(root);

    const link = g.selectAll(".link")
      .data(treeData.links())
      .join("path")
      .attr("class", "link")
      .attr("fill", "none")
      .attr("d", d3.linkHorizontal()
        .x(d => d.y + 100)
        .y(d => d.x + 50));

    const node = g.selectAll(".node")
      .data(treeData.descendants())
      .join("g")
      .attr("class", "node")
      .attr("transform", d => `translate(${d.y + 100},${d.x + 50})`)
      .on("click", function(event, d) {
        const popup = document.getElementById("popup");
        document.getElementById("popup-title").innerText = d.data.name;
        document.getElementById("popup-desc").innerText = d.data.desc;
        popup.style.display = "block";
      });

    node.append("circle").attr("r", 16);
    node.append("text")
      .attr("dy", 4)
      .attr("x", d => d.children ? -24 : 24)
      .style("text-anchor", d => d.children ? "end" : "start")
      .text(d => d.data.name);
  </script>
</body>
</html>
